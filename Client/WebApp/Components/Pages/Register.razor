@page "/register"

@using System.ComponentModel.DataAnnotations
@rendermode InteractiveServer


<h3>Create User Profile</h3>

<div class="profile-form-container">
    <EditForm Model="@profile" OnValidSubmit="@HandleValidSubmit">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <div class="form-group">
            <label for="name">Full Name</label>
            <InputText id="name" class="form-control" @bind-Value="profile.Name" />
        </div>

        <div class="form-group">
            <label for="description">Profile Description</label>
            <InputTextArea id="description" class="form-control" @bind-Value="profile.Description" rows="4" />
        </div>

        <div class="form-group">
            <label for="experience">Experience</label>
            <InputTextArea id="experience" class="form-control" @bind-Value="profile.Experience" rows="3" />
        </div>

        <div class="form-group">
            <label for="education">Education</label>
            <InputTextArea id="education" class="form-control" @bind-Value="profile.Education" rows="3" />
        </div>

        <div class="form-group">
            <label>Skills</label>
            <div class="skills-list">
                @foreach (var skill in skills)
                {
                    <button type="button" class="skill-btn @(profile.SelectedSkills.Contains(skill) ? "selected" : "")"
                        @onclick="() => ToggleSkill(skill)">
                        @skill
                    </button>
                }
            </div>
        </div>

        <button type="submit" class="submit-btn">Create Profile</button>
    </EditForm>
</div>

@code {
    private UserProfile profile = new();

    // Placeholder list of skills
    private List<string> skills = new()
{
"C#",
"JavaScript",
"SQL",
"Blazor",
"React",
"Azure",
"Docker"
};

    private void ToggleSkill(string skill)
    {
        if (profile.SelectedSkills.Contains(skill))
            profile.SelectedSkills.Remove(skill);
        else
            profile.SelectedSkills.Add(skill);
    }

    private void HandleValidSubmit()
    {
        Console.WriteLine($"Profile created for {profile.Name}");
        Console.WriteLine($"Skills: {string.Join(", ", profile.SelectedSkills)}");
    }

    public class UserProfile
    {
        [Required]
        public string Name { get; set; } = string.Empty;
        public string Description { get; set; } = string.Empty;
        public string Experience { get; set; } = string.Empty;
        public string Education { get; set; } = string.Empty;
        public List<string> SelectedSkills { get; set; } = new();
    }
}